# 与用户相关的接口

## 一、注册

    post 提交
    <span class="hljs-string">url:</span><span class="hljs-string">http:</span><span class="hljs-comment">//localhost/weekly/index.php/login/register</span>
    传值
        uid         账号
        name        昵称
        password    密码
        password2
    返回
        <span class="hljs-number">200</span> 注册成功
        <span class="hljs-number">202</span> 两次密码不一致
        <span class="hljs-number">203</span> 账号重复
    `</pre>

    ## 二、登陆

    ### 2.1:获取头像

    <pre>`    方法： post
        url：<span class="hljs-string">http:</span><span class="hljs-comment">//localhost/weekly/index.php/login/get_photo</span>
        传值：
            uid 账号
        返回：
            data
                photo 头像的图片链接
    `</pre>

    ### 2.2 登陆验证

    <pre>`    方法：<span class="hljs-built_in">post</span>
        url：<span class="hljs-keyword">http</span>://localhost/weekly/index.php/login/check_login
        传值：
            uid 账号
            password 密码
        返回：
            <span class="hljs-number">200</span> 登陆成功
            data
                uid     账号
                name    名字
                photo   头像
                <span class="hljs-keyword">token</span>   用户令牌

            这三个变量要保存下来，uid和name、photo还好,方便用来显示就不需要做一些请求了

            <span class="hljs-keyword">token</span>一定要保留，很多地方都需要提交<span class="hljs-keyword">token</span>

            <span class="hljs-number">203</span> 用户名或者密码错误
    `</pre>

    ## 三、通知

    ### 3.1 新消息(未读通知)

    <pre>`方法:<span class="hljs-built_in">post</span>
    url:<span class="hljs-keyword">http</span>://localhost/weekly/index.php/message/<span class="hljs-built_in">get</span>
    传值:
        <span class="hljs-keyword">token</span>  <span class="hljs-keyword">token</span>
        type
            unread 仅获取未读消息
            all    获取全部消息
    返回：
        data 数组
            <span class="hljs-number">0</span>=>
            id  消息id
            uid 收消息的人
            message 消息内容
            <span class="hljs-built_in">time</span> 时间
            status 是否阅读过 <span class="hljs-number">1</span>未读，<span class="hljs-number">2</span>已读
            <span class="hljs-number">1</span>=>
                …………
    (查看过详情的消息才算被读过)
    `</pre>

    ### 3.2 通知详情

    <pre>`方法:<span class="hljs-built_in">get</span>
    url:<span class="hljs-keyword">http</span>://localhost/weekly/index.php/message/<span class="hljs-built_in">get</span>?id=<span class="hljs-number">1</span>
    传值：
        id
    返回
        data
            id  消息id
            uid 收消息的人
            message 消息内容
            <span class="hljs-built_in">time</span> 时间
            status 是否阅读过 <span class="hljs-number">1</span>未读，<span class="hljs-number">2</span>已读
    `</pre>

    ### 3.3 标记通知为已读

    <pre>`方法：get
    url：http:<span class="hljs-comment">//localhost/weekly/index.php/message/update?id=1</span>
    传值：
        <span class="hljs-keyword">id</span>  消息<span class="hljs-keyword">id</span>
    返回
        <span class="hljs-number">200</span> 成功
        <span class="hljs-number">203</span> 标记已读失败
    `</pre>

    ### 3.4 删除通知消息

    <pre>`方法：<span class="hljs-built_in">post</span>
    url：<span class="hljs-keyword">http</span>://localhost/weekly/index.php/message/<span class="hljs-built_in">delete</span>
    传值
        <span class="hljs-keyword">token</span>
        id  消息id
    返回
        <span class="hljs-number">200</span> 成功
        <span class="hljs-number">203</span> 删除通知失败
    `</pre>

    ## 四、个人详细信息

    <pre>`方法：get
    url：http:<span class="hljs-comment">//localhost/weekly/index.php/user/detail?uid=user001</span>
    传值：
        uid 账号
    返回：data
                uid         账号
                name        昵称
                photo       头像
                introduce   简介（个性签名）
                real_name   真是姓名
                birthday    生日
                <span class="hljs-tag">address</span>     地址
                tel         电话
                qq          qq
                email       邮箱

                register_time   注册日期
                last_time       上次登录时间
                last_ip         上次登录ip

                <span class="hljs-function"><span class="hljs-title">label_array</span><span class="hljs-params">(标签 数组)</span></span>
                    <span class="hljs-tag">label</span> 标签
    (Ps:没必要全都显示出来 比如说注册日期和上次登录时间之类没用的东西)

    添加标签
    方法 post
    url：http:<span class="hljs-comment">//localhost/weekly/index.php/user/add_label</span>
    传值:
        uid 被评价人的uid
        <span class="hljs-tag">label</span> 标签
    返回
        <span class="hljs-number">200</span> ok
    `</pre>

    ## 五、修改个人信息

    ### 5.1:基本信息修改

    <pre>`    方法：post
        url：http:<span class="hljs-comment">//localhost/weekly/index.php/user/update</span>
        传值：
            token
            type 修改的信息种类
            value 修改的信息的值

    -------------(Ps:type的规定如下)--------------
    <span class="hljs-string">|    name    昵称</span>
    <span class="hljs-string">|    privacy 周报可见性</span>
    <span class="hljs-string">|            1 所有人可见</span>
    <span class="hljs-string">|            2 仅组内成员可见</span>
    <span class="hljs-string">|            3 仅自己可见</span>
    <span class="hljs-string">|</span>
    <span class="hljs-string">|    real_name 真实名字</span>
    <span class="hljs-string">|    sex       性别</span>
    <span class="hljs-string">|    introduce 简介(个性签名)</span>
    <span class="hljs-string">|    birthday  生日</span>
    <span class="hljs-string">|    address   地址</span>
    <span class="hljs-string">|    tel       电话号码</span>
    <span class="hljs-string">|    qq        qq</span>
    <span class="hljs-string">|    email     邮箱</span>
    ----------------------------------------------
    `</pre>

    ### 5.2:上传/修改头像

    ### 5.3:修改密码

    <pre>`    方法<span class="hljs-pseudo">:post</span>
        <span class="hljs-tag">url</span><span class="hljs-pseudo">:http</span>:<span class="hljs-comment">//localhost/weekly/index.php/user/change_pass</span>
        传值：
            <span class="hljs-tag">token</span>
            <span class="hljs-tag">old_pass</span>    旧密码
            <span class="hljs-tag">new_pass</span>    新密码
        返回
            <span class="hljs-tag">200</span> 成功
            <span class="hljs-tag">203</span> 旧密码不正确
    `</pre>

    ### 5.4给某人添加标签

    <pre>`    方法：<span class="hljs-attribute">post</span>
        <span class="hljs-attribute">url</span>:<span class="hljs-attribute">http</span>:<span class="hljs-comment">//localhost/weekly/index.php/user/add_label</span>
        传值：
            uid  被评论的人的账号
            label 添加内容
        返回：
            <span class="hljs-number">200</span> ok
            <span class="hljs-number">203</span> 添加标签失败
    `</pre>

    ## 六、找回密码

    ## 七、写周报

    <pre>`方法:<span class="hljs-built_in">post</span>
    url: <span class="hljs-keyword">http</span>://localhost/weekly/index.php/weekly/<span class="hljs-built_in">add</span>
    传值：
        <span class="hljs-keyword">token</span>
        title   主题
        content 内容
    返回：
        <span class="hljs-number">200</span> 成功
    `</pre>

    ## 八、修改周报

    <pre>`方法：post
    <span class="hljs-string">url:</span><span class="hljs-string">http:</span><span class="hljs-comment">//localhost/weekly/index.php/weekly/update</span>
    传值
        token
        id      周报的id
        title   主题
        content 内容
    返回
        <span class="hljs-number">200</span> 成功
    `</pre>

    ## 九、查看周报

    ### 9.1 查看所有周报

    <pre>`方法：get
    url：http:<span class="hljs-comment">//localhost/weekly/index.php/weekly/all</span>
    传值：
        orderby 排序方式
        uid 用户<span class="hljs-function"><span class="hljs-title">uid</span><span class="hljs-params">(可有可无， 有的话就是单独这个人的周报 没有就是所有人的)</span></span>
    返回：
        data 数组
            <span class="hljs-number">0</span>=>
            …………
            参考<span class="hljs-number">9.2</span>
            …………
    `</pre>

    ### 9.2 周报详情

    <pre>`    方法：get
        url: http:<span class="hljs-comment">//localhost/weekly/index.php/weekly/detail?wid=1</span>
        传值：
            wid  周报的<span class="hljs-keyword">id</span>号
        返回：
            data
                <span class="hljs-keyword">id</span>  周报的<span class="hljs-keyword">id</span>
                uid 用户账号
                name 昵称
                photo 头像
                title 题目
                content 内容
                hits 点击量
                agrees 点赞量
                update_time 上传时间/最后一次修改时间
                comments  评论(数组)
                    <span class="hljs-number">0</span>=>
                    <span class="hljs-keyword">id</span> 评论的<span class="hljs-keyword">id</span>
                    w_id 周报<span class="hljs-keyword">id</span>
                    uid 用户名
                    name 昵称
                    photo 头像
                    content 评论内容
                    time 时间
                    <span class="hljs-number">1</span>=>
                    …………
                    …………
    `</pre>

    ### 9.3 点赞

    <pre>`    方法:<span class="hljs-built_in">post</span>
        url：<span class="hljs-keyword">http</span>://localhost/weekly/index.php/weekly/agree
        传值:
            <span class="hljs-keyword">token</span>
            wid 周报的id
        返回
            <span class="hljs-number">199</span> 已经赞过，这次相当于取消赞
            <span class="hljs-number">200</span> 点赞成功
    `</pre>

    ### 9.4 评论

    <pre>`    方法：<span class="hljs-built_in">post</span>
        url:
        传值
            <span class="hljs-keyword">token</span>
            c_uid
    `</pre>

    ## 十、创建小组

    <pre>`提交方式 <span class="hljs-built_in">post</span>
    url:<span class="hljs-keyword">http</span>://localhost/weekly/index.php/group/<span class="hljs-built_in">add</span>
    传值:
        <span class="hljs-keyword">token</span>         <span class="hljs-keyword">token</span>
        name        小组名称
        introduce   小组简介
    返回：
        <span class="hljs-number">200</span> 创建成功
    `</pre>

    ## 十一、用户申请加入小组

    <pre>`提交方式 post
    <span class="hljs-string">url:</span><span class="hljs-string">http:</span><span class="hljs-comment">//localhost/weekly/index.php/member/apply</span>
    传值：
        token
        gid    申请加入的小组id
        reason 申请理由 可以不填
    返回
        <span class="hljs-number">200</span> 申请成功
    `</pre>

    ## 十二、修改小组信息

    <pre>`提交方式 <span class="hljs-built_in">post</span>
    url：<span class="hljs-keyword">http</span>://localhost/weekly/index.php/group/update
    传值:
        <span class="hljs-keyword">token</span>
        gid         小组id
        name        小组的名字
        introduce   小组简介
    返回
        <span class="hljs-number">203</span> 权限不足
        <span class="hljs-number">200</span> 修改成功
    `</pre>

    ## 十三、删除小组

    <pre>`提交方式 <span class="hljs-built_in">post</span>
    url：<span class="hljs-keyword">http</span>://localhost/weekly/index.php/group/<span class="hljs-built_in">delete</span>
    传值:
        <span class="hljs-keyword">token</span>
        gid 小组id
    返回 ：
        <span class="hljs-number">200</span> 删除成功
        <span class="hljs-number">203</span> 权限不足
    `</pre>

    ## 十四、小组负责人(超级管理员修改权限)

    ### 14.1 查看所有管理员

    <pre>`    方法：<span class="hljs-attribute">get</span>
        <span class="hljs-attribute">url</span>:<span class="hljs-attribute">http</span>:<span class="hljs-comment">//localhost/weekly/index.php/group/admins?gid=1</span>
        传值：
            gid 小组的id
        返回
            与查看小组全部成员相同 （十八）
    `</pre>

    ### 14.2 撤销管理员权限 只有 超级管理员才可以

    <pre>`    方法：<span class="hljs-built_in">post</span>
        url:<span class="hljs-keyword">http</span>://localhost/weekly/index.php/admin/<span class="hljs-built_in">delete</span>
        传值
            <span class="hljs-keyword">token</span>
            gid         小组id
            admin_id    要取消的管理员的uid
    `</pre>

    ### 14.3 设置管理员

    <pre>`    方法：<span class="hljs-built_in">post</span>
        url:<span class="hljs-keyword">http</span>://localhost/weekly/index.php/admin/<span class="hljs-built_in">add</span>
        传值
            <span class="hljs-keyword">token</span>
            gid         小组id
            admin_id    要取消的管理员的uid
    `</pre>

    ## 十五、审核待加入成员

    ### 15.1 查看所有申请的人员列表

    <pre>`    方法：<span class="hljs-built_in">post</span>
        url:<span class="hljs-keyword">http</span>://localhost/weekly/index.php/admin/check_members
        传值：
            <span class="hljs-keyword">token</span>
            gid 小组id
        返回：
        data 数组
            <span class="hljs-number">0</span>=>
            g_id    小组id
            uid     用户账号
            name    用户昵称
            photo   头像
            introduce 简介(个性签名)
            sex     性别
            reason  申请理由
            <span class="hljs-built_in">time</span>    时间
            <span class="hljs-number">1</span>=>
                …………
                同上
                …………
    `</pre>

    ### 15.2 获取申请人的详情 就是看用户详情 参考四

    ### 15.3 通过审核 允许加入

    <pre>`    方法：<span class="hljs-built_in">post</span>
        url：<span class="hljs-keyword">http</span>://localhost/weekly/index.php/admin/add_member
        传值：
            <span class="hljs-keyword">token</span>
            applyid 申请人的uid
            gid 申请加入的小组号
        返回：
            <span class="hljs-number">200</span> ok
            <span class="hljs-number">203</span> 权限不足
    `</pre>

    ### 15.4 拒绝加入

    <pre>`    方法： <span class="hljs-built_in">post</span>
        url：<span class="hljs-keyword">http</span>://localhost/weekly/index.php/admin/refuse
        传值：
            <span class="hljs-keyword">token</span>
            applyid 申请人的uid
            gid 申请加入的小组号
        返回：
            <span class="hljs-number">200</span> ok
            <span class="hljs-number">203</span> 权限不足
    `</pre>

    ## 十六、所有小组列表

    <pre>`提交方式:无
    url：http:<span class="hljs-comment">//localhost/weekly/index.php/group/all</span>
    返回:
        data (数组)
            <span class="hljs-number">0</span>=>
                ……………………
                和下面的一样（十七）
                ……………………
            <span class="hljs-number">1</span>=>
    `</pre>

    ## 十七、查看小组详细信息

    <pre>`提交方式:get
    url：http://localhost/weekly/index.php/<span class="hljs-literal">group</span>/detail?<span class="hljs-built_in">gid</span>=<span class="hljs-number">1</span>
    传值:
        <span class="hljs-built_in">gid</span> 小组<span class="hljs-built_in">id</span>
    返回:
        data
            g_id            组号
            g_name          名字
            g_introduce     小组简介
            <span class="hljs-literal">members</span>         小组总人数
            g_creater_uid   创建人<span class="hljs-literal">uid</span>
            g_creater_name  创建人的昵称
            g_creater_photo 创建人的头像
            g_create_time   创建时间 （注意create 最后没有r）
    `</pre>

    ## 十八、获取小组全部成员

    <pre>`提交方式:get
    url：http://localhost/weekly/index.php/<span class="hljs-literal">group</span>/<span class="hljs-literal">members</span>?<span class="hljs-built_in">gid</span>=<span class="hljs-number">1</span>
    返回:
            data (小组所有成员 数组)
              <span class="hljs-number">0</span>=>
                g_id 组号
                level 等级
                <span class="hljs-literal">uid</span> 账号
                <span class="hljs-literal">name</span> 昵称
                photo 头像
                introduce 自我介绍
                sex 性别
                address 地址
                tel 电话
                qq
                jion_time 加入时间
                last_time 最后一次登录时间
                last_ip 最后一次登录<span class="hljs-literal">ip</span>
              <span class="hljs-number">1</span>=>
                …………
                …………
    